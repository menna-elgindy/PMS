import { useEffect, useState } from "react";
import { Sidebar, Menu, MenuItem } from "react-pro-sidebar";
import { NavLink } from "react-router-dom";
import styles from "./SideBarMenu.module.css";

const saveSideBarState = (state: { collapsed: boolean }) => {
  localStorage.setItem("sideBarState", JSON.stringify(state));
};
const getSideBarState = () => {
  const state = localStorage.getItem("sideBarState");
  return state ? JSON.parse(state) : { collapsed: true };
};

const SideBarMenu = () => {
  // const { loginData, removeLoginData } = useContext(AuthContext);
  const [isCollapsed, setIsCollapsed] = useState<boolean>(
    getSideBarState().collapsed
  );

  const toggleCollapse = () => {
    setIsCollapsed(!isCollapsed);
  };

  useEffect(() => {
    saveSideBarState({ collapsed: isCollapsed });
  }, [isCollapsed]);

  return (
    <div
      className={`sidebar-container position-fixed d-flex ${
        isCollapsed ? "collapsed" : ""
      }`}
    >
      <Sidebar collapsed={isCollapsed}>
        <Menu>
          <MenuItem
            onClick={toggleCollapse}
            icon={
              <div className={styles["arrow-menu-item-wrapper"]}>
                <div className={styles["arrow-menu-item"]}>
                  <svg
                    width="8"
                    height="14"
                    viewBox="0 0 8 14"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M7.35355 13.3536C7.15829 13.5488 6.84171 13.5488 6.64645 13.3536L0.646447 7.35355C0.451185 7.15829 0.451185 6.84171 0.646447 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446C7.54882 0.841709 7.54882 1.15829 7.35355 1.35355L1.70711 7L7.35355 12.6464C7.54882 12.8417 7.54882 13.1583 7.35355 13.3536Z"
                      fill="white"
                    />
                  </svg>
                </div>
              </div>
            }
            className={`${styles["collapsed-arrow"]} transation-all duration-300 ease-in-out`}
          ></MenuItem>
          <MenuItem
            icon={
              <i className="fa fa-home " aria-hidden="true" aria-label="home" />
            }
            component={<NavLink end to="/dashboard" />}
          >
            Home
          </MenuItem>
          {/* {loginData?.userGroup !== "SystemUser" && ( */}
          <MenuItem
            icon={
              <i
                className="fa fa-users"
                aria-hidden="true"
                aria-label="users"
              />
            }
            component={<NavLink to="users?page=1" />}
          >
            Users
          </MenuItem>
          {/* )} */}

          <MenuItem
            icon={
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M6 1V4H1L1 1H6ZM1 0C0.447715 0 0 0.447715 0 1V4C0 4.55228 0.447715 5 1 5H6C6.55228 5 7 4.55228 7 4V1C7 0.447715 6.55228 0 6 0H1Z"
                  fill="white"
                />
                <path
                  d="M15 12V15H10V12H15ZM10 11C9.44772 11 9 11.4477 9 12V15C9 15.5523 9.44772 16 10 16H15C15.5523 16 16 15.5523 16 15V12C16 11.4477 15.5523 11 15 11H10Z"
                  fill="white"
                />
                <path
                  d="M6 8V15H1L1 8H6ZM1 7C0.447715 7 0 7.44772 0 8V15C0 15.5523 0.447715 16 1 16H6C6.55228 16 7 15.5523 7 15V8C7 7.44772 6.55228 7 6 7H1Z"
                  fill="white"
                />
                <path
                  d="M15 1V8H10V1H15ZM10 0C9.44772 0 9 0.447715 9 1V8C9 8.55229 9.44772 9 10 9H15C15.5523 9 16 8.55229 16 8V1C16 0.447715 15.5523 0 15 0H10Z"
                  fill="white"
                />
              </svg>
            }
            component={<NavLink to="projects" />}
          >
            Projects
          </MenuItem>

          <MenuItem
            icon={
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clipPath="url(#clip0_1733_919)">
                  <path
                    d="M4.3628 1.10932C4.32796 1.07436 4.28656 1.04662 4.24098 1.02769C4.1954 1.00877 4.14653 0.999023 4.09717 0.999023C4.04782 0.999023 3.99895 1.00877 3.95336 1.02769C3.90778 1.04662 3.86638 1.07436 3.83155 1.10932L1.84155 3.08776L1.13217 2.39651C1.09733 2.36155 1.05593 2.33381 1.01035 2.31488C0.964771 2.29595 0.915901 2.28621 0.866546 2.28621C0.81719 2.28621 0.768321 2.29595 0.722739 2.31488C0.677157 2.33381 0.635759 2.36155 0.600921 2.39651L0.110296 2.88776C0.0753357 2.9226 0.0475969 2.96399 0.0286699 3.00957C0.00974286 3.05516 0 3.10403 0 3.15338C0 3.20274 0.00974286 3.25161 0.0286699 3.29719C0.0475969 3.34277 0.0753357 3.38417 0.110296 3.41901L1.59748 4.90026C1.67172 4.97082 1.77022 5.01017 1.87264 5.01017C1.97506 5.01017 2.07356 4.97082 2.1478 4.90026L2.63498 4.41213L4.89123 2.15619C4.96153 2.08584 5.00125 1.9906 5.00178 1.89115C5.00231 1.79169 4.9636 1.69604 4.89405 1.62494L4.3628 1.10932ZM4.3628 6.08401C4.32796 6.04905 4.28656 6.02131 4.24098 6.00238C4.1954 5.98345 4.14653 5.97371 4.09717 5.97371C4.04782 5.97371 3.99895 5.98345 3.95336 6.00238C3.90778 6.02131 3.86638 6.04905 3.83155 6.08401L1.84155 8.07526L1.13217 7.38463C1.09733 7.34967 1.05593 7.32193 1.01035 7.30301C0.964771 7.28408 0.915901 7.27434 0.866546 7.27434C0.81719 7.27434 0.768321 7.28408 0.722739 7.30301C0.677157 7.32193 0.635759 7.34967 0.600921 7.38463L0.110296 7.87494C0.0753357 7.90978 0.0475969 7.95118 0.0286699 7.99676C0.00974286 8.04234 0 8.09121 0 8.14057C0 8.18992 0.00974286 8.23879 0.0286699 8.28438C0.0475969 8.32996 0.0753357 8.37136 0.110296 8.40619L1.59373 9.89057C1.66791 9.96111 1.76637 10.0005 1.86873 10.0005C1.9711 10.0005 2.06955 9.96111 2.14373 9.89057L2.63436 9.40026L4.89061 7.14338C4.96064 7.07352 5.00023 6.97882 5.00075 6.8799C5.00128 6.78098 4.9627 6.68586 4.89342 6.61526L4.3628 6.08401ZM1.99998 11.4999C1.17217 11.4999 0.481546 12.1718 0.481546 12.9999C0.481546 13.8281 1.1728 14.4999 1.99998 14.4999C2.39781 14.4999 2.77934 14.3419 3.06064 14.0606C3.34195 13.7793 3.49998 13.3978 3.49998 12.9999C3.49998 12.6021 3.34195 12.2206 3.06064 11.9393C2.77934 11.658 2.39781 11.4999 1.99998 11.4999ZM15.5 11.9999H6.49998C6.36737 11.9999 6.2402 12.0526 6.14643 12.1464C6.05266 12.2402 5.99998 12.3673 5.99998 12.4999V13.4999C5.99998 13.6326 6.05266 13.7597 6.14643 13.8535C6.2402 13.9473 6.36737 13.9999 6.49998 13.9999H15.5C15.6326 13.9999 15.7598 13.9473 15.8535 13.8535C15.9473 13.7597 16 13.6326 16 13.4999V12.4999C16 12.3673 15.9473 12.2402 15.8535 12.1464C15.7598 12.0526 15.6326 11.9999 15.5 11.9999ZM15.5 1.99994H6.49998C6.36737 1.99994 6.2402 2.05262 6.14643 2.14639C6.05266 2.24016 5.99998 2.36734 5.99998 2.49994V3.49994C5.99998 3.63255 6.05266 3.75973 6.14643 3.8535C6.2402 3.94727 6.36737 3.99994 6.49998 3.99994H15.5C15.6326 3.99994 15.7598 3.94727 15.8535 3.8535C15.9473 3.75973 16 3.63255 16 3.49994V2.49994C16 2.36734 15.9473 2.24016 15.8535 2.14639C15.7598 2.05262 15.6326 1.99994 15.5 1.99994ZM15.5 6.99994H6.49998C6.36737 6.99994 6.2402 7.05262 6.14643 7.14639C6.05266 7.24016 5.99998 7.36734 5.99998 7.49994V8.49994C5.99998 8.63255 6.05266 8.75973 6.14643 8.8535C6.2402 8.94727 6.36737 8.99994 6.49998 8.99994H15.5C15.6326 8.99994 15.7598 8.94727 15.8535 8.8535C15.9473 8.75973 16 8.63255 16 8.49994V7.49994C16 7.36734 15.9473 7.24016 15.8535 7.14639C15.7598 7.05262 15.6326 6.99994 15.5 6.99994Z"
                    fill="white"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_1733_919">
                    <rect width="16" height="16" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            }
            component={<NavLink to="tasks" />}
          >
            Tasks
          </MenuItem>
        </Menu>
      </Sidebar>
    </div>
  );
};

export default SideBarMenu;
